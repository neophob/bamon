<mat-card>
  <mat-card-content>
    <div class="button-row">
      <button mat-flat-button color="primary" type="button" (click)="connect()">
        Connect
      </button>
      <button mat-flat-button color="warn" type="button" (click)="disconnect()">
        Disconnect
      </button>
      <button mat-stroked-button type="button" (click)="simulate()">
        Simulate
      </button>
    </div>

    <mat-grid-list cols="3" rowHeight="48%">
      <mat-grid-tile [colspan]="1" [rowspan]="1" [style.background]="'#B4B4B8'">
        @if (connected) {
          <h1 class="display-1">{{ voltage.toFixed(1) }}V</h1>
        } @else {
          <h1>ðŸš«</h1>
        }
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="1" [style.background]="'#C7C8CC'">
        @if (connected) {
          <h1 class="display-1">{{ current.toFixed(1) }}A</h1>
        } @else {
          <h1>ðŸš«</h1>
        }
      </mat-grid-tile>

      <mat-grid-tile [colspan]="1" [rowspan]="2" [style.background]="'#E3E1D9'">
        <last-update-ts></last-update-ts>
        @if (connected) {
          <h1 class="display-1">{{ capacityTotal }}%</h1>
        } @else {
          <h1>ðŸš«</h1>
        }
        <capacity-diag></capacity-diag>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="2" [rowspan]="1" [style.background]="'#F2EFE5'">
        @if (connected) {
          <h1 class="display-1">{{ power.toFixed(1) }}W</h1>
        } @else {
          <h1>ðŸš«</h1>
        }
        <power-diag></power-diag>
      </mat-grid-tile>
    </mat-grid-list>

    <mat-card-footer>
      @if (connecting) {
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      }
    </mat-card-footer>
  </mat-card-content>
</mat-card>

<router-outlet />
